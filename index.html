<html>
<head>
    <title>Juxtapoesie</title>
    <link rel="stylesheet" href="css/primary.css" type="text/css" />
    <link rel="stylesheet" href="scripts/jquery.crop.css" type="text/css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script type="text/javascript" src="scripts/jquery.mousewheel.js"></script>
	<script type="text/javascript" src="scripts/jquery.crop.js"></script>
	<script type="text/javascript">
		$( function () {
			$( '.crop' ).each( function () {
				var image     = $( this )
					, results = image.next( '.results' )
					, crop    = image
						.crop( {
							width      : 480
							, height   : 350
							, loading  : 'Hello World'
							, text     : 'Drag to move, scroll to zoom'
							//, controls : false
						} )
						.on( 'crop', function( event ) {
							$( '.cropX', results ).text( event.cropX );
							$( '.cropY', results ).text( event.cropY );
							$( '.cropW', results ).text( event.cropW );
							$( '.cropH', results ).text( event.cropH );
						} )
						.data( 'crop' );
				image
					//.on( 'dblclick', $.proxy( crop.zoomIn, crop ) )
					.on( 'mousewheel', function ( event ) {
						return event.originalEvent.wheelDelta < 0 ?
							crop.zoomIn() :
							crop.zoomOut();
					} );
			} );
		} );
	</script>
</head>
<body>
<div id="title">
    <h1>Juxtapoesie</h1>
</div>
<div class="juxta">
    <div class="juxta-title"></div>
    <canvas></canvas>
    <div class="juxta-credits"></div>
</div>

<div class="juxta2">
    <img class="crop" alt="" src="http://inapcache.boston.com/universal/site_graphics/blogs/bigpicture/greve_10_22/g06_25574551.jpg" />
    <!-- <div class="results">
        <b>X</b>: <span class="cropX"></span>
        <b>Y</b>: <span class="cropY"></span>
        <b>W</b>: <span class="cropW"></span>
        <b>H</b>: <span class="cropH"></span>
    </div> -->
    <img class="crop" alt="" src="http://inapcache.boston.com/universal/site_graphics/blogs/bigpicture/greve_10_22/g07_25466881.jpg" />
    <!-- <div class="results">
        <b>X</b>: <span class="cropX"></span>
        <b>Y</b>: <span class="cropY"></span>
        <b>W</b>: <span class="cropW"></span>
        <b>H</b>: <span class="cropH"></span>
    </div> -->
</div>



<script type="text/javascript">
function clippedBackgroundImage( ctx, img, w, h ){
	ctx.save(); // Save the context before clipping
	ctx.clip(); // Clip to whatever path is on the context

	var imgHeight = w / img.width * img.height;
	if (imgHeight < h ){
		ctx.fillStyle = '#111';
		ctx.fill();
	}
	ctx.drawImage(img,0,0,w,imgHeight);

	ctx.restore(); // Get rid of the clipping region
}

function diagBoxes(ctx, xdim, ydim, xstart, xtop, xbottom, y, img, w, h) {
    ctx.save();

    //
    ctx.translate(xstart, 0);

    // Draw the diagonal box on the left
    ctx.beginPath();
    ctx.lineTo(0, 0);
    ctx.lineTo(xtop, 0);
    ctx.lineTo(xbottom, y);
    ctx.lineTo(0, y);
    ctx.lineTo(0, 0);
    ctx.closePath();

    // Add the image
    if (xstart !== 0) {
        ctx.translate(xbottom,0);
        clippedBackgroundImage(ctx, img, w, h);
    } else {
        clippedBackgroundImage(ctx, img, w, h);
    }

    // Draw the image and restore the canvas context
    ctx.stroke();
    ctx.restore();
}

function drawSlash(ctx, xtop, xbottom, y) {
    ctx.save();

    ctx.beginPath();
    ctx.lineTo(xtop, 0);
    ctx.lineTo(xbottom, y);
    ctx.closePath();

    ctx.stroke();
    ctx.restore();
}

window.onload = function() {
    var c = document.getElementsByTagName("canvas")[0];
    var ctx = c.getContext('2d');
    c.width = 960;
    c.height = 350;
    ctx.lineWidth = 4;
    var img1 = new Image;
    img1.src = "http://inapcache.boston.com/universal/site_graphics/blogs/bigpicture/greve_10_22/g06_25574551.jpg";
    img1.onload = function() {
        ctx.strokeStyle = "none";
        diagBoxes(ctx, c.width, c.height, 0, c.width / 2 + 50, c.width / 2 - 50, c.height, img1, c.width / 2 + 50, c.height);
        var img2 = new Image;
        img2.src = "http://inapcache.boston.com/universal/site_graphics/blogs/bigpicture/greve_10_22/g07_25466881.jpg";
        img2.onload = function() {
            ctx.strokeStyle = "none";
            diagBoxes(ctx, c.width, c.height, c.width, -1 * (c.width / 2 - 50), -1 * (c.width / 2 + 50), c.height, img2, (c.width / 2 + 50), c.height);
            ctx.strokeStyle = "#ffffff";
            drawSlash(ctx, c.width / 2 + 50, c.width / 2 - 50, c.height);

        }
    }
}

// window.onload = function(){
//  var c    = document.getElementsByTagName('canvas')[0];
//  var ctx  = c.getContext('2d');
//  c.width  = 800;
//  c.height = 600;
//  ctx.lineWidth = 4;
//  ctx.strokeStyle = '#000'
//
//  var img = new Image;
//  img.onload = function(){
//      setInterval(function(){
//          //ctx.clearRect(0,0,c.width,c.height);
//          var padding   = 10;
//          var slashSize = 30;
//          var w = Math.random()*c.width/2  + 2*slashSize;
//          var h = Math.random()*c.height/2 + 2*slashSize;
//          var x = Math.random()*(c.width  - w - 2*padding) + padding;
//          var y = Math.random()*(c.height - h - 2*padding) + padding;
//          slashedRectWithBG( ctx, x, y, w, h, slashSize, img );
//      },10000);
//  };
//  img.src = 'http://phrogz.net/tmp/burlap.jpg';
// };



// First get the window height and width
// var winHeight = jQuery(window).height();
// var winWidth = jQuery(window).width();
// var windowHash = jQuery(location).attr('hash');
//
// var xGridWidth = (0.75 * winWidth); // Get 75% dimension
// var yGridWidth = (0.70 * winHeight); // Get 70% dimension
//
// var xCells = 50;
// var yCells = 24;
//
// var xcellWidth = d3.round(xGridWidth / xCells);
// var ycellWidth = d3.round(yGridWidth / yCells) - 1;
//
// var xWin = (xCells) * (xcellWidth);
// var yWin = (yCells) * (ycellWidth);
// if (yWin > yGridWidth) {
//     yWin = yWin - (ycellWidth * 1.0);
// }
// var transTime = 1000;
//
// reloaders = ["#reloader1", "reloader2", "reloader3", "reloader4"];
//
// var hash = jQuery(location).attr('hash');
// var margin = 12;


</script>


</body>
</html>